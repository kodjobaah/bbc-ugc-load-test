{"ast":null,"code":"import _defineProperty from\"/Users/kodjo/workspace/afriex/loadtest-framework/docker/control/test-admin/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/kodjo/workspace/afriex/loadtest-framework/docker/control/test-admin/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/kodjo/workspace/afriex/loadtest-framework/docker/control/test-admin/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/kodjo/workspace/afriex/loadtest-framework/docker/control/test-admin/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/kodjo/workspace/afriex/loadtest-framework/docker/control/test-admin/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component,useState}from\"react\";import{post}from\"axios\";import ActivityIndicator from'react-activity-indicator';import{Button,Container,Header,Form,Message,Modal}from\"semantic-ui-react\";import SlaveConfig from\"./SlaveConfig/SlaveConfig\";import\"./Create.css\";var bandwidthOptions=[{key:\"adsl\",value:\"adsl\",text:\"ADSL : 8 Mbit/s\"},{key:\"adsl2\",value:\"adsl2\",text:\"ADSL2 : 12 Mbit/s\"},{key:\"adsl2Plus\",value:\"adsl2Plus\",text:\"ADSL2+ : 24 Mbit/s\"},{key:\"ethernetLan\",value:\"ethernetLan\",text:\"Ethernet LAN ; 10 Mbit/s\"},{key:\"fastEthernet\",value:\"fastEthernet\",text:\"Fast Ethernet : 100 Mbit/s\"},{key:\"gigabitEthernet\",value:\"gigabitEthernet\",text:\"Gigabit Ethernet : 1 Gbit/s\"},{key:\"10gigabitEthernet\",value:\"10gigabitEthernet\",text:\"10 Gigabit Ethernet : 10 Gbit/s\"},{key:\"100gigabitEthernet\",value:\"100gigabitEthernet\",text:\"100 Gigabit Ethernet : 100 Gbit/s\"},{key:\"mobileDataEdge\",value:\"mobileDataEdge\",text:\"Mobile data EDGE : 384 kbit/s\"},{key:\"mobileDatacHspaPlus\",value:\"mobileDatacHspaPlus\",text:\"Mobile data HSPA+ : 21 Mbp/s\"},{key:\"mobileDataHspa\",value:\"mobileDataHspa\",text:\"Mobile data HSPA : 14,4 Mbp/s\"},{key:\"mobileDataDcHspaPlus\",value:\"mobileDataDcHspaPlus\",text:\"Mobile data DC-HSPA+ : 42 Mbps\"},{key:\"mobileDataLte\",value:\"mobileDataLte\",text:\"Mobile data LTE : 150 Mbp/s\"},{key:\"mobileDataGprs\",value:\"mobileDataGprs\",text:\"Mobile data GPRS : 171 kbit/s\"},{key:\"wifi80211a\",value:\"wifi80211a\",text:\"WIFI 802.11a/g : 54 Mbit/s\"},{key:\"wifi80211n\",value:\"wifi80211n\",text:\"WIFI 802.11n : 600 Mbit/s\"}];var CreateTest=/*#__PURE__*/function(_Component){_inherits(CreateTest,_Component);var _super=_createSuper(CreateTest);function CreateTest(props){var _this;_classCallCheck(this,CreateTest);_this=_super.call(this,props);_this.state={open:false,teststart:false,bandwidthError:false,cpuError:false,jmeterscriptError:false,maxmetaError:false,ramError:false,slavesError:false,tenantError:false,testdataError:false,xmsError:false,xmxError:false,bandwidth:\"\",cpu:\"\",jmeterscript:\"\",maxmeta:\"\",ram:\"\",slaves:\"\",tenant:\"\",testdata:\"\",xms:\"\",xmx:\"\",formError:false,loading:false,dialog:'nothing'};_this.handleChange=function(e,item){_this.setState({loading:false});if(item){_this.setState(_defineProperty({},item.name,item.value));}else{if(e.target.name===\"jmeterscript\"||e.target.name===\"testdata\"){_this.setState(_defineProperty({},e.target.name,e.target.files[0]));}else{_this.setState(_defineProperty({},e.target.name,e.target.value));}}};_this.handleSubmit=function(e){e.preventDefault();var error=false;if(_this.state.bandwidth===\"\"){_this.setState({bandwidthError:true});error=true;}else{_this.setState({bandwidthError:false});}if(_this.state.cpu===\"\"){_this.setState({cpuError:true});error=true;}else{_this.setState({cpuError:false});}if(_this.state.jmeterscript===\"\"){_this.setState({jmeterscriptError:true});error=true;}else{_this.setState({jmeterscriptError:false});}if(_this.state.maxmeta===\"\"){_this.setState({maxmetaError:true});error=true;}else{_this.setState({maxmetaError:false});}if(_this.state.ram===\"\"){_this.setState({ramError:true});error=true;}else{_this.setState({ramError:false});}if(_this.state.tenant===\"\"){_this.setState({tenantError:true});error=true;}else{_this.setState({tenantError:false});}/*\n    if (this.state.testdata === \"\") {\n      this.setState({ testdataError: true });\n      error = true;\n    } else {\n      this.setState({ testdataError: false });\n    }\n    */if(_this.state.xms===\"\"){_this.setState({xmsError:true});error=true;}else{_this.setState({xmsError:false});}if(_this.state.xmx===\"\"){_this.setState({xmxError:true});error=true;}else{_this.setState({xmxError:false});}if(_this.state.slaves===\"\"){_this.setState({slavesError:true});error=true;}else{_this.setState({slavesError:false});}if(error===true){_this.setState({formError:true});}else{if(_this.state.dialog==='do-nothing'){_this.setState({formError:false});_this.fileUpload().then(function(response){_this.setState({teststart:true});console.log(\"response from call:\",response);_this.setState({loading:false});});console.log(\"---------- DANG\");}else{_this.setState({dialog:'do-nothing'});console.log(\"---- do thing\");}}};_this.closeModal=function(){_this.setState({open:false});_this.setState({formError:false});_this.setState({dialog:'close'});};_this.configureModal=function(closeOnEscape,closeOnDimmerClick){return function(){_this.setState({open:true});_this.setState({dialog:'open'});};};_this.state={loading:false};return _this;}_createClass(CreateTest,[{key:\"fileUpload\",value:function fileUpload(file){var url=\"/start-test\";var formData=new FormData();formData.append(\"context\",this.state.tenant);formData.append(\"numberOfNodes\",this.state.slaves);formData.append(\"jmeter\",this.state.jmeterscript);formData.append(\"data\",this.state.testdata);formData.set(\"xmx\",this.state.xmx);formData.set(\"xms\",this.state.xms);formData.set(\"cpu\",this.state.cpu);formData.set(\"ram\",this.state.ram);formData.set(\"maxMetaspaceSize\",this.state.maxmeta);var config={headers:{\"content-type\":\"multipart/form-data\"}};this.setState({loading:true});console.log(\"-------- DOODANG\");return post(url,formData,config);}},{key:\"render\",value:function render(){var _React$createElement;var open=this.state.open;return/*#__PURE__*/React.createElement(Container,{className:\"CreateTest-Wrapper\"},/*#__PURE__*/React.createElement(Container,{textAlign:\"center\"},/*#__PURE__*/React.createElement(Header,{as:\"h1\"},\"Create Test\")),/*#__PURE__*/React.createElement(Form,{error:this.state.formError,onSubmit:this.handleSubmit},this.state.formError?/*#__PURE__*/React.createElement(Message,{error:true,header:\"Test Creation Error\",content:\"Please make sure you have supplied all data\"}):null,/*#__PURE__*/React.createElement(Form.Field,{required:true},/*#__PURE__*/React.createElement(\"label\",null,\"Tennant\"),/*#__PURE__*/React.createElement(\"input\",{name:\"tenant\",onChange:this.handleChange,placeholder:\"Tennat\"}),/*#__PURE__*/React.createElement(\"small\",null,\"This is the tenant in which you want to run the tests\")),/*#__PURE__*/React.createElement(Form.Field,{required:true},/*#__PURE__*/React.createElement(\"label\",null,\"Number of jmeter Slaves\"),/*#__PURE__*/React.createElement(\"input\",{name:\"slaves\",onChange:this.handleChange,placeholder:\"Slaves\"})),/*#__PURE__*/React.createElement(Form.Field,{required:true},/*#__PURE__*/React.createElement(\"label\",null,\"Settings for Jmeter slaves\"),/*#__PURE__*/React.createElement(Button,{color:\"blue\",onClick:this.configureModal(true,false)},\"Configure Slaves\"),/*#__PURE__*/React.createElement(Modal,{style:{height:\"fit-content\"},open:open},/*#__PURE__*/React.createElement(Modal.Header,null,\"SlaveConfiguration\"),/*#__PURE__*/React.createElement(Modal.Content,null,/*#__PURE__*/React.createElement(SlaveConfig,{create:this})),/*#__PURE__*/React.createElement(Modal.Actions,null,/*#__PURE__*/React.createElement(Button,{positive:true,onClick:this.closeModal,labelPosition:\"right\",icon:\"checkmark\",content:\"Done\"})))),/*#__PURE__*/React.createElement(Form.Field,{required:true},/*#__PURE__*/React.createElement(\"label\",null,\"Select Bandwidth\"),/*#__PURE__*/React.createElement(Form.Select,{name:\"bandwidth\",placeholder:\"select bandwidth\",onChange:this.handleChange,options:bandwidthOptions})),/*#__PURE__*/React.createElement(Form.Field,{required:true},/*#__PURE__*/React.createElement(\"label\",null,\"Jmeter Test Script\"),/*#__PURE__*/React.createElement(\"input\",{name:\"jmeterscript\",onChange:this.handleChange,type:\"file\"}),/*#__PURE__*/React.createElement(\"small\",null,\"This is the Jmeter script to upload\")),/*#__PURE__*/React.createElement(Form.Field,null,/*#__PURE__*/React.createElement(\"label\",null,\"Test Data\"),/*#__PURE__*/React.createElement(\"input\",{name:\"testdata\",onChange:this.handleChange,type:\"file\"}),/*#__PURE__*/React.createElement(\"small\",null,\"This is the data file used by the test\")),this.state.loading?/*#__PURE__*/React.createElement(ActivityIndicator,(_React$createElement={number:5,diameter:40,borderWidth:1,duration:300,activeColor:\"#66D9EF\",borderColor:\"white\"},_defineProperty(_React$createElement,\"borderWidth\",5),_defineProperty(_React$createElement,\"borderRadius\",\"50%\"),_React$createElement)):/*#__PURE__*/React.createElement(Button,{color:\"blue\",type:\"submit\"},\"Run Tests\")),this.state.teststart?/*#__PURE__*/React.createElement(Message,{info:true,header:this.state.tenant,content:\"Started Test\"}):null);}}]);return CreateTest;}(Component);export default CreateTest;","map":{"version":3,"sources":["/Users/kodjo/workspace/afriex/loadtest-framework/docker/control/test-admin/src/Main/Jmeter/Create/Create.js"],"names":["React","Component","useState","post","ActivityIndicator","Button","Container","Header","Form","Message","Modal","SlaveConfig","bandwidthOptions","key","value","text","CreateTest","props","state","open","teststart","bandwidthError","cpuError","jmeterscriptError","maxmetaError","ramError","slavesError","tenantError","testdataError","xmsError","xmxError","bandwidth","cpu","jmeterscript","maxmeta","ram","slaves","tenant","testdata","xms","xmx","formError","loading","dialog","handleChange","e","item","setState","name","target","files","handleSubmit","preventDefault","error","fileUpload","then","response","console","log","closeModal","configureModal","closeOnEscape","closeOnDimmerClick","file","url","formData","FormData","append","set","config","headers","height"],"mappings":"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","sourcesContent":["import React, { Component, useState } from \"react\";\nimport { post } from \"axios\";\nimport ActivityIndicator from 'react-activity-indicator'\nimport {\n  Button,\n  Container,\n  Header,\n  Form,\n  Message,\n  Modal,\n} from \"semantic-ui-react\";\nimport SlaveConfig from \"./SlaveConfig/SlaveConfig\";\nimport \"./Create.css\";\n\n\nconst bandwidthOptions = [\n  { key: \"adsl\", value: \"adsl\", text: \"ADSL : 8 Mbit/s\" },\n  { key: \"adsl2\", value: \"adsl2\", text: \"ADSL2 : 12 Mbit/s\" },\n  { key: \"adsl2Plus\", value: \"adsl2Plus\", text: \"ADSL2+ : 24 Mbit/s\" },\n  {\n    key: \"ethernetLan\",\n    value: \"ethernetLan\",\n    text: \"Ethernet LAN ; 10 Mbit/s\",\n  },\n  {\n    key: \"fastEthernet\",\n    value: \"fastEthernet\",\n    text: \"Fast Ethernet : 100 Mbit/s\",\n  },\n  {\n    key: \"gigabitEthernet\",\n    value: \"gigabitEthernet\",\n    text: \"Gigabit Ethernet : 1 Gbit/s\",\n  },\n  {\n    key: \"10gigabitEthernet\",\n    value: \"10gigabitEthernet\",\n    text: \"10 Gigabit Ethernet : 10 Gbit/s\",\n  },\n  {\n    key: \"100gigabitEthernet\",\n    value: \"100gigabitEthernet\",\n    text: \"100 Gigabit Ethernet : 100 Gbit/s\",\n  },\n  {\n    key: \"mobileDataEdge\",\n    value: \"mobileDataEdge\",\n    text: \"Mobile data EDGE : 384 kbit/s\",\n  },\n  {\n    key: \"mobileDatacHspaPlus\",\n    value: \"mobileDatacHspaPlus\",\n    text: \"Mobile data HSPA+ : 21 Mbp/s\",\n  },\n  {\n    key: \"mobileDataHspa\",\n    value: \"mobileDataHspa\",\n    text: \"Mobile data HSPA : 14,4 Mbp/s\",\n  },\n  {\n    key: \"mobileDataDcHspaPlus\",\n    value: \"mobileDataDcHspaPlus\",\n    text: \"Mobile data DC-HSPA+ : 42 Mbps\",\n  },\n  {\n    key: \"mobileDataLte\",\n    value: \"mobileDataLte\",\n    text: \"Mobile data LTE : 150 Mbp/s\",\n  },\n  {\n    key: \"mobileDataGprs\",\n    value: \"mobileDataGprs\",\n    text: \"Mobile data GPRS : 171 kbit/s\",\n  },\n  {\n    key: \"wifi80211a\",\n    value: \"wifi80211a\",\n    text: \"WIFI 802.11a/g : 54 Mbit/s\",\n  },\n  { key: \"wifi80211n\", value: \"wifi80211n\", text: \"WIFI 802.11n : 600 Mbit/s\" },\n];\n\nclass CreateTest extends Component {\n  state = {\n    open: false,\n    teststart: false,\n    bandwidthError: false,\n    cpuError: false,\n    jmeterscriptError: false,\n    maxmetaError: false,\n    ramError: false,\n    slavesError: false,\n    tenantError: false,\n    testdataError: false,\n    xmsError: false,\n    xmxError: false,\n    bandwidth: \"\",\n    cpu: \"\",\n    jmeterscript: \"\",\n    maxmeta: \"\",\n    ram: \"\",\n    slaves: \"\",\n    tenant: \"\",\n    testdata: \"\",\n    xms: \"\",\n    xmx: \"\",\n    formError: false,\n    loading: false,\n    dialog: 'nothing'\n  };\n\nconstructor(props) {\n  super(props);\n  this.state = { loading: false };\n}\n\n  handleChange = (e, item) => {\n    this.setState({loading: false})\n    if (item) {\n      this.setState({ [item.name]: item.value });\n    } else {\n      if (e.target.name === \"jmeterscript\" || e.target.name === \"testdata\") {\n        this.setState({ [e.target.name]: e.target.files[0] });\n      } else {\n        this.setState({ [e.target.name]: e.target.value });\n      }\n    }\n  };\n  handleSubmit = (e) => {\n    e.preventDefault();\n    let error = false;\n    if (this.state.bandwidth === \"\") {\n      this.setState({ bandwidthError: true });\n      error = true;\n    } else {\n      this.setState({ bandwidthError: false });\n    }\n    if (this.state.cpu === \"\") {\n      this.setState({ cpuError: true });\n      error = true;\n    } else {\n      this.setState({ cpuError: false });\n    }\n\n    if (this.state.jmeterscript === \"\") {\n      this.setState({ jmeterscriptError: true });\n      error = true;\n    } else {\n      this.setState({ jmeterscriptError: false });\n    }\n\n    if (this.state.maxmeta === \"\") {\n      this.setState({ maxmetaError: true });\n      error = true;\n    } else {\n      this.setState({ maxmetaError: false });\n    }\n\n    if (this.state.ram === \"\") {\n      this.setState({ ramError: true });\n      error = true;\n    } else {\n      this.setState({ ramError: false });\n    }\n\n    if (this.state.tenant === \"\") {\n      this.setState({ tenantError: true });\n      error = true;\n    } else {\n      this.setState({ tenantError: false });\n    }\n\n    /*\n    if (this.state.testdata === \"\") {\n      this.setState({ testdataError: true });\n      error = true;\n    } else {\n      this.setState({ testdataError: false });\n    }\n    */\n\n    if (this.state.xms === \"\") {\n      this.setState({ xmsError: true });\n      error = true;\n    } else {\n      this.setState({ xmsError: false });\n    }\n\n    if (this.state.xmx === \"\") {\n      this.setState({ xmxError: true });\n      error = true;\n    } else {\n      this.setState({ xmxError: false });\n    }\n\n    if (this.state.slaves === \"\") {\n      this.setState({ slavesError: true });\n      error = true;\n    } else {\n      this.setState({ slavesError: false });\n    }\n\n    if (error === true) {\n      this.setState({ formError: true });\n    } else {\n\n      if (this.state.dialog === 'do-nothing') {\n        this.setState({ formError: false });\n        this.fileUpload().then((response) => {\n          this.setState({ teststart: true });\n          console.log(\"response from call:\", response)\n          this.setState({ loading: false});\n        });\n        console.log(\"---------- DANG\")\n      } else {\n        this.setState({dialog: 'do-nothing'})\n        console.log(\"---- do thing\")\n      }\n    }\n  };\n\n  fileUpload(file) {\n    const url = \"/start-test\";\n    const formData = new FormData();\n    formData.append(\"context\", this.state.tenant);\n    formData.append(\"numberOfNodes\", this.state.slaves);\n    formData.append(\"jmeter\", this.state.jmeterscript);\n    formData.append(\"data\", this.state.testdata);\n    formData.set(\"xmx\", this.state.xmx);\n    formData.set(\"xms\", this.state.xms);\n    formData.set(\"cpu\", this.state.cpu);\n    formData.set(\"ram\", this.state.ram);\n    formData.set(\"maxMetaspaceSize\", this.state.maxmeta);\n    const config = {\n      headers: {\n        \"content-type\": \"multipart/form-data\",\n      },\n    };\n    this.setState( {loading: true});\n    console.log(\"-------- DOODANG\")\n    return post(url, formData, config);\n  }\n\n  closeModal = () => {\n    this.setState({ open: false });\n    this.setState({ formError: false });\n    this.setState({dialog: 'close'})\n  };\n\n  configureModal = (closeOnEscape, closeOnDimmerClick) => () => {\n    this.setState({ open: true });\n    this.setState({dialog: 'open'})\n  };\n\n  render() {\n    const { open } = this.state;\n    return (\n      \n      <Container className=\"CreateTest-Wrapper\">\n        <Container textAlign=\"center\">\n          <Header as=\"h1\">Create Test</Header>\n        </Container>\n\n        <Form error={this.state.formError} onSubmit={this.handleSubmit}>\n          {this.state.formError ? (\n            <Message\n              error\n              header=\"Test Creation Error\"\n              content=\"Please make sure you have supplied all data\"\n            />\n          ) : null}\n          <Form.Field required>\n            <label>Tennant</label>\n            <input\n              name=\"tenant\"\n              onChange={this.handleChange}\n              placeholder=\"Tennat\"\n            />\n            <small>This is the tenant in which you want to run the tests</small>\n          </Form.Field>\n          <Form.Field required>\n            <label>Number of jmeter Slaves</label>\n            <input\n              name=\"slaves\"\n              onChange={this.handleChange}\n              placeholder=\"Slaves\"\n            />\n          </Form.Field>\n          <Form.Field required>\n            <label>Settings for Jmeter slaves</label>\n            <Button color=\"blue\" onClick={this.configureModal(true, false)}>\n              Configure Slaves\n            </Button>\n\n            <Modal style={{ height: \"fit-content\" }} open={open}>\n              <Modal.Header>SlaveConfiguration</Modal.Header>\n              <Modal.Content>\n                <SlaveConfig create={this} />\n              </Modal.Content>\n              <Modal.Actions>\n                <Button\n                  positive\n                  onClick={this.closeModal}\n                  labelPosition=\"right\"\n                  icon=\"checkmark\"\n                  content=\"Done\"\n                />\n              </Modal.Actions>\n            </Modal>\n          </Form.Field>\n          <Form.Field required>\n          <label>Select Bandwidth</label>\n          \n          <Form.Select\n            name=\"bandwidth\"\n            placeholder=\"select bandwidth\"\n            onChange={this.handleChange}\n            options={bandwidthOptions}\n          />\n          </Form.Field>\n          <Form.Field required>\n            <label>Jmeter Test Script</label>\n            <input\n              name=\"jmeterscript\"\n              onChange={this.handleChange}\n              type=\"file\"\n            />\n            <small>This is the Jmeter script to upload</small>\n          </Form.Field>\n          <Form.Field>\n            <label>Test Data</label>\n            <input name=\"testdata\" onChange={this.handleChange} type=\"file\" />\n            <small>This is the data file used by the test</small>\n          </Form.Field>\n\n          {this.state.loading ? (\n          <ActivityIndicator\n          number={5}\n          diameter={40}\n          borderWidth={1}\n          duration={300}\n          activeColor=\"#66D9EF\"\n          borderColor=\"white\"\n          borderWidth={5}\n          borderRadius=\"50%\" \n      />\n          ) : <Button color=\"blue\" type=\"submit\">\n          Run Tests\n        </Button>}\n          \n        </Form>\n        {this.state.teststart ? (\n          <Message info header={this.state.tenant} content=\"Started Test\" />\n        ) : null}\n      </Container>\n    );\n  }\n}\n\nexport default CreateTest;\n"]},"metadata":{},"sourceType":"module"}