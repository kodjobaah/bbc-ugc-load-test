{"ast":null,"code":"import _objectSpread from\"/Users/kodjo/workspace/afriex/loadtest-framework/docker/control/test-admin/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/kodjo/workspace/afriex/loadtest-framework/docker/control/test-admin/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/kodjo/workspace/afriex/loadtest-framework/docker/control/test-admin/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/kodjo/workspace/afriex/loadtest-framework/docker/control/test-admin/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/kodjo/workspace/afriex/loadtest-framework/docker/control/test-admin/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/kodjo/workspace/afriex/loadtest-framework/docker/control/test-admin/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/kodjo/workspace/afriex/loadtest-framework/docker/control/test-admin/node_modules/@babel/runtime/helpers/esm/createSuper\";import MyContext from\"./MyContext\";import React,{Component}from\"react\";import{fetchReportByTenant,fetchDashboardUrl,fetchSlavesForTenant}from'./provider/report';import _ from'lodash';var MyProvider=/*#__PURE__*/function(_Component){_inherits(MyProvider,_Component);var _super=_createSuper(MyProvider);function MyProvider(props){var _this;_classCallCheck(this,MyProvider);_this=_super.call(this,props);_this.updateFunctions=function(){_this.setState({fetchSlaves:_this.fetchSlaves});_this.setState({fetchReportsForTenant:_this.fetchReportsForTenant});_this.setState({fetchSlavesForTenant:_this.fetchSlavesForTenant});};_this.fetchReportsForTenant=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var report,reports;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetchReportByTenant(id);case 2:report=_context.sent;reports=_.map(report,function(item){return{id:id.concat(\"-\",item.date),date:item.date};});_this.setState({reports:reports});case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.fetchSlaves=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(tenant){var slaves;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetchSlavesForTenant(tenant);case 2:slaves=_context2.sent;_this.setState({slaves:slaves});case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();_this.fetchDashboardURLS=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var dashboard;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetchDashboardUrl();case 2:dashboard=_context3.sent;_this.setState({graphanaUrl:dashboard.DashboardURL});_this.setState({influxdbUrl:dashboard.InfluxdbURL});_this.setState({chronographUrl:dashboard.ChronografURL});_this.setState({graphsUrl:dashboard.ReportURL});_this.setState({weaveScopeUrl:dashboard.MonitorURL});case 8:case\"end\":return _context3.stop();}}},_callee3);}));_this.state={reports:[],slaves:[],graphanaUrl:'',influxdbUrl:'',chronographUrl:'',graphsUrl:'',weaveScopeUrl:''};return _this;}_createClass(MyProvider,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:this.updateFunctions();this.fetchDashboardURLS();case 2:case\"end\":return _context4.stop();}}},_callee4,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(MyContext.Provider,{value:_objectSpread({},this.state)},this.props.children);}}]);return MyProvider;}(Component);export default MyProvider;","map":{"version":3,"sources":["/Users/kodjo/workspace/afriex/loadtest-framework/docker/control/test-admin/src/MyProvider.js"],"names":["MyContext","React","Component","fetchReportByTenant","fetchDashboardUrl","fetchSlavesForTenant","_","MyProvider","props","updateFunctions","setState","fetchSlaves","fetchReportsForTenant","id","report","reports","map","item","concat","date","tenant","slaves","fetchDashboardURLS","dashboard","graphanaUrl","DashboardURL","influxdbUrl","InfluxdbURL","chronographUrl","ChronografURL","graphsUrl","ReportURL","weaveScopeUrl","MonitorURL","state","children"],"mappings":"ujCAAA,MAAOA,CAAAA,SAAP,KAAsB,aAAtB,CAEA,MAAOC,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CAEA,OAASC,mBAAT,CAA8BC,iBAA9B,CAAiDC,oBAAjD,KAA6E,mBAA7E,CACA,MAAOC,CAAAA,CAAP,KAAc,QAAd,C,GAEMC,CAAAA,U,wGACJ,oBAAYC,KAAZ,CAAmB,4CACjB,uBAAMA,KAAN,EADiB,MAkBnBC,eAlBmB,CAkBD,UAAM,CACrB,MAAKC,QAAL,CAAc,CAACC,WAAW,CAAE,MAAKA,WAAnB,CAAd,EACA,MAAKD,QAAL,CAAc,CAACE,qBAAqB,CAAE,MAAKA,qBAA7B,CAAd,EACA,MAAKF,QAAL,CAAc,CAACL,oBAAoB,CAAE,MAAKA,oBAA5B,CAAd,EACF,CAtBkB,OAuBnBO,qBAvBmB,0FAuBK,iBAAOC,EAAP,2JACDV,CAAAA,mBAAmB,CAACU,EAAD,CADlB,QAChBC,MADgB,eAElBC,OAFkB,CAERT,CAAC,CAACU,GAAF,CAAMF,MAAN,CAAc,SAACG,IAAD,CAAS,CACnC,MAAO,CAACJ,EAAE,CAAEA,EAAE,CAACK,MAAH,CAAU,GAAV,CAAcD,IAAI,CAACE,IAAnB,CAAL,CAA+BA,IAAI,CAAEF,IAAI,CAACE,IAA1C,CAAP,CACD,CAFa,CAFQ,CAKtB,MAAKT,QAAL,CAAc,CAAEK,OAAO,CAAEA,OAAX,CAAd,EALsB,sDAvBL,qEA+BnBJ,WA/BmB,2FA+BL,kBAAMS,MAAN,wJACSf,CAAAA,oBAAoB,CAACe,MAAD,CAD7B,QACNC,MADM,gBAEZ,MAAKX,QAAL,CAAc,CAAEW,MAAM,CAAEA,MAAV,CAAd,EAFY,wDA/BK,uEAoCnBC,kBApCmB,sEAoCE,6KACKlB,CAAAA,iBAAiB,EADtB,QACbmB,SADa,gBAEnB,MAAKb,QAAL,CAAc,CAAEc,WAAW,CAAED,SAAS,CAACE,YAAzB,CAAd,EACA,MAAKf,QAAL,CAAc,CAAEgB,WAAW,CAAEH,SAAS,CAACI,WAAzB,CAAd,EACA,MAAKjB,QAAL,CAAc,CAAEkB,cAAc,CAAEL,SAAS,CAACM,aAA5B,CAAd,EACA,MAAKnB,QAAL,CAAc,CAAEoB,SAAS,CAAEP,SAAS,CAACQ,SAAvB,CAAd,EACA,MAAKrB,QAAL,CAAc,CAAEsB,aAAa,CAAET,SAAS,CAACU,UAA3B,CAAd,EANmB,wDApCF,GAEjB,MAAKC,KAAL,CAAa,CACXnB,OAAO,CAAE,EADE,CAEXM,MAAM,CAAE,EAFG,CAGXG,WAAW,CAAE,EAHF,CAIXE,WAAW,CAAE,EAJF,CAKXE,cAAc,CAAE,EALL,CAMXE,SAAS,CAAE,EANA,CAOXE,aAAa,CAAE,EAPJ,CAAb,CAFiB,aAWlB,C,0RAGC,KAAKvB,eAAL,GACA,KAAKa,kBAAL,G,iNA6BO,CACP,mBACE,oBAAC,SAAD,CAAW,QAAX,EACE,KAAK,kBACA,KAAKY,KADL,CADP,EAKG,KAAK1B,KAAL,CAAW2B,QALd,CADF,CASD,C,wBAvDsBjC,S,EA0DzB,cAAeK,CAAAA,UAAf","sourcesContent":["import MyContext from \"./MyContext\";\n\nimport React, { Component } from \"react\";\n\nimport { fetchReportByTenant, fetchDashboardUrl, fetchSlavesForTenant } from './provider/report';\nimport _ from 'lodash';\n\nclass MyProvider extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      reports: [],\n      slaves: [],\n      graphanaUrl: '',\n      influxdbUrl: '',\n      chronographUrl: '',\n      graphsUrl: '',\n      weaveScopeUrl: ''\n    };\n  }\n\n  async componentDidMount() {\n    this.updateFunctions();\n    this.fetchDashboardURLS();\n  }\n\n  updateFunctions = () => {\n     this.setState({fetchSlaves: this.fetchSlaves});\n     this.setState({fetchReportsForTenant: this.fetchReportsForTenant});\n     this.setState({fetchSlavesForTenant: this.fetchSlavesForTenant});\n  }\n  fetchReportsForTenant = async (id) => {\n    const report = await fetchReportByTenant(id);\n    let reports = _.map(report, (item)=> {\n      return {id: id.concat(\"-\",item.date), date: item.date}\n    });\n    this.setState({ reports: reports });\n  };\n\n  fetchSlaves = async(tenant) => {\n    const slaves = await fetchSlavesForTenant(tenant);\n    this.setState({ slaves: slaves });\n  }\n\n  fetchDashboardURLS = async () => {\n    const dashboard = await fetchDashboardUrl();\n    this.setState({ graphanaUrl: dashboard.DashboardURL });\n    this.setState({ influxdbUrl: dashboard.InfluxdbURL });\n    this.setState({ chronographUrl: dashboard.ChronografURL });\n    this.setState({ graphsUrl: dashboard.ReportURL });\n    this.setState({ weaveScopeUrl: dashboard.MonitorURL });\n  };\n  render() {\n    return (\n      <MyContext.Provider\n        value={{\n          ...this.state,\n        }}\n      >\n        {this.props.children}\n      </MyContext.Provider>\n    );\n  }\n}\n\nexport default MyProvider;\n"]},"metadata":{},"sourceType":"module"}