{"ast":null,"code":"import _classCallCheck from\"/Users/kodjo/workspace/afriex/loadtest-framework/docker/control/test-admin/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/kodjo/workspace/afriex/loadtest-framework/docker/control/test-admin/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/kodjo/workspace/afriex/loadtest-framework/docker/control/test-admin/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/kodjo/workspace/afriex/loadtest-framework/docker/control/test-admin/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import BootstrapTable from\"react-bootstrap-table-next\";import paginationFactory from\"react-bootstrap-table2-paginator\";import MyConsumer from\"../../../../../MyConsumer\";import{get}from\"axios\";import{Button,Divider}from\"semantic-ui-react\";import\"./SlaveList.css\";var columns=[{dataField:\"Name\",text:\"Name\"},{dataField:\"PodIP\",text:\"PodIP\"},{dataField:\"Phase\",text:\"Phase\"}];export var SlaveList=/*#__PURE__*/function(_Component){_inherits(SlaveList,_Component);var _super=_createSuper(SlaveList);function SlaveList(){var _this;_classCallCheck(this,SlaveList);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={slaves:{}};_this.updateState=function(row,isSelect,rowIndex,e){_this.setState(function(state){var items=_this.state.slaves;if(isSelect){items[row.Name]=row.PodIP;}else{delete items[row.Name];}return{slaves:items};});return true;};_this.getLogs=function(){var slaves=\"\";if(Array.isArray(_this.state.slaves)){slaves=_this.state.slaves;}else{var keys=Object.keys(_this.state.slaves);slaves=_this.state.slaves[keys[0]];}if(typeof _this.state.slaves!=='undefined'){var FileDownload=require(\"js-file-download\");get(\"/test-output?ip=\"+slaves).then(function(response){var keys=Object.keys(_this.state.slaves);FileDownload(response.data,keys[0]+\".log\");});}};_this.selectRowProp={mode:\"checkbox\",// single row selection\nhideSelectAll:true,clickToSelect:true,onSelect:_this.updateState};return _this;}_createClass(SlaveList,[{key:\"componentDidMount\",value:function componentDidMount(){}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(MyConsumer,null,function(_ref){var slaves=_ref.slaves;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(BootstrapTable//  classes=\"reportlist\"\n,{keyField:\"Name\",data:slaves,selectRow:_this2.selectRowProp,columns:columns,pagination:paginationFactory()}),/*#__PURE__*/React.createElement(Divider,null),/*#__PURE__*/React.createElement(Button,{color:\"blue\",onClick:_this2.getLogs},\"Get Logs\"));});}}]);return SlaveList;}(Component);export default SlaveList;","map":{"version":3,"sources":["/Users/kodjo/workspace/afriex/loadtest-framework/docker/control/test-admin/src/Main/Jmeter/Report/SlaveLogFiles/SlaveList/SlaveList.js"],"names":["React","Component","BootstrapTable","paginationFactory","MyConsumer","get","Button","Divider","columns","dataField","text","SlaveList","state","slaves","updateState","row","isSelect","rowIndex","e","setState","items","Name","PodIP","getLogs","Array","isArray","keys","Object","FileDownload","require","then","response","data","selectRowProp","mode","hideSelectAll","clickToSelect","onSelect"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport paginationFactory from \"react-bootstrap-table2-paginator\";\nimport MyConsumer from \"../../../../../MyConsumer\";\nimport { get } from \"axios\";\nimport { Button, Divider } from \"semantic-ui-react\";\nimport \"./SlaveList.css\";\nconst columns = [\n  {\n    dataField: \"Name\",\n    text: \"Name\",\n  },\n  {\n    dataField: \"PodIP\",\n    text: \"PodIP\",\n  },\n  {\n    dataField: \"Phase\",\n    text: \"Phase\",\n  },\n];\n\nexport class SlaveList extends Component {\n  state = {\n    slaves: {},\n  };\n\n  updateState = (row, isSelect, rowIndex, e) => {\n    this.setState((state) => {\n      let items = this.state.slaves;\n      if (isSelect) {\n        items[row.Name] = row.PodIP;\n      } else {\n        delete items[row.Name];\n      }\n      return {\n        slaves: items,\n      };\n    });\n\n    return true;\n  };\n\n  getLogs = () => {\n    let slaves = \"\";\n    if (Array.isArray(this.state.slaves)) {\n      slaves = this.state.slaves;\n    } else {\n      var keys = Object.keys( this.state.slaves )\n      slaves = this.state.slaves[keys[0]];\n    }\n   \n    if (typeof this.state.slaves !== 'undefined') {\n      const FileDownload = require(\"js-file-download\");\n      get(\"/test-output?ip=\"+slaves).then((response) => {\n        var keys = Object.keys( this.state.slaves )\n        FileDownload(response.data,keys[0]+\".log\")\n      });\n\n    }\n  };\n  selectRowProp = {\n    mode: \"checkbox\", // single row selection\n    hideSelectAll: true,\n    clickToSelect: true,\n    onSelect: this.updateState,\n  };\n  componentDidMount() {}\n\n  render() {\n    return (\n      <MyConsumer>\n        {({ slaves }) => (\n          <div>\n            <BootstrapTable\n              //  classes=\"reportlist\"\n              keyField=\"Name\"\n              data={slaves}\n              selectRow={this.selectRowProp}\n              columns={columns}\n              pagination={paginationFactory()}\n            />\n            <Divider />\n            <Button color=\"blue\" onClick={this.getLogs}>\n              Get Logs\n            </Button>\n          </div>\n        )}\n      </MyConsumer>\n    );\n  }\n}\n\nexport default SlaveList;\n"]},"metadata":{},"sourceType":"module"}